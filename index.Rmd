--- 
title: "Glossary"
author: "psyTeachR Team"
date: "`r Sys.Date()`"
site: bookdown::bookdown_site
documentclass: book
bibliography: [book.bib, packages.bib]
biblio-style: apalike
link-citations: yes
description: "Definitions of technical terms"
---

```{r cite-packages, include = FALSE}
# automatically create a bib database for R packages
# add any packages you want to cite here
knitr::write_bib(c(
  .packages(), 'bookdown', 'tidyverse'
), 'packages.bib')

```

# Overview {-}

The glossary defines common jargon you might encounter while learning R. This specialised vocabulary can help you to communicate more efficiently about coding and to search for solutions to problems, but the terms aren't always self-explanatory.

## Using the glossary

If you are using the [psyTeachR book template](](/book-template/), you can use the glossary function to automatically link to a term in the and automatically include a tooltip with a short definition when you hover over the term. Use the following syntax in inline r: `glossary("word")`. For example, common `r glossary("data type", "data types")` are `r glossary("integer")`, `r glossary("double")`, and `r glossary("character")`.

If you're not using the psyTeachR book template, the functions are below.

```{r}
myglossary <- list()

## link to glossary with shortdef on hover
glossary <- function(term, display = NULL, shortdef = "", link = TRUE) {
  lcterm <- gsub(" ", "-", tolower(term), fixed = TRUE)
  if (is.null(display)) display <- term
  first_letter <- substr(lcterm, 1, 1)
  url <- paste0("https://psyteachr.github.io/glossary/", first_letter)
  if (shortdef == "") {
    hash <- paste0("#", lcterm, " dfn")
    shortdef <- tryCatch(xml2::read_html(url) %>% 
                           rvest::html_node(hash) %>%
                           rvest::html_text() %>%
                           gsub("\'", "&#39;", .),
                         error = function(e) { "" })
  }
  
  ## add to global glossary for this book
  myglossary[lcterm] <<- shortdef
  
  if (link) {
    paste0("<a class='glossary' target='_blank' title='", shortdef, 
         "' href='", url, "#", lcterm, "'>", display, "</a>")
  } else {
    paste0("<a class='glossary' title='", shortdef, "'>", display, "</a>")
  }
}

glossary_table <- function() {
  as.data.frame(myglossary) %>% 
    t() %>% 
    as.data.frame() %>%
    rownames_to_column(var="term") %>%
    rename("definition" = V1) %>%
    mutate(term = paste0("<a class='glossary' target='_blank' ",
                         "href='https://psyteachr.github.io/glossary/",
                         substr(term, 1, 1), "#", term, "'>",
                         gsub(".", " ", term, fixed = 1), "</a>")) %>%
    arrange(term) %>%
    knitr::kable(escape = FALSE)
}
```


If you need to link to a definition, but are using a different form of the word, add the display version as the second argument (`display`). You can also override the automatic short definition by providing your own in the third argument (`shortdef`). Add the argument `link = FALSE` if you just want the hover definition and not a link to the psyTeachR glossary.

```{r glossary-example, results='asis'}
glossary("data type", 
         display="Data Types", 
         shortdef="My custom definition of data types", 
         link = FALSE)
```

You can add a glossary table to the end of a chapter with the following code. It creates a table of all terms used in that chapter previous to the `glossary_table()` function.

```{r, eval=FALSE, verbatim="r, echo=FALSE, results='asis'"} 
glossary_table()
```

`r glossary_table()`

If you want to contribute to the glossary, fork the [github project](https://github.com/PsyTeachR/glossary), add your terms and submit a pull request, or suggest a new term at the [issues page](https://github.com/PsyTeachR/glossary/issues).


